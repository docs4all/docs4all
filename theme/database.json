{"filename":"theme/database.json","collections":[{"name":"documents","data":[{"path":"/horus","id":0,"name":"horus","type":"node","meta":{"revision":0,"created":1646598529391,"version":0},"$loki":1},{"path":"/horus/introspect","id":1,"parent":0,"name":"introspect","type":"node","meta":{"revision":0,"created":1646598529392,"version":0},"$loki":2},{"path":"/horus/introspect/validate.md","id":2,"parent":1,"type":"child","text":"# Validate Token\n\nValidate the relationship between token, subject(person or client), option (endpoint or menu web), http method and application\n\n**Base Url** : `{{horusApiBaseUrl}}`\n\n**Endpoint** : `/v1/nonspec/oauth2/introspect/validate`\n\n**Method** : `POST`\n\n**Auth required** : No\n\n**Permissions required** : No\n\n## Request\n\n**type: body**\n\n**validate web**\n\n```json\n{\n   \"token\":\"eyJhbGciOiJIUzI1NbpBI0cPA3ZmH1tDwaqBo9Q\",\n   \"optionValue\":\"/home\",\n   \"httpMethod\":\"NOT_HTTP_METHOD\",\n   \"appName\":\"pasarela-web\"\n}\n```\n\n**validate api**\n\n```json\n{\n   \"token\":\"eyJhbGciOiJIUzDorpsd40YSHORpQA9yZLA\",\n   \"optionValue\":\"/payment\",\n   \"httpMethod\":\"POST\",\n   \"appName\":\"pasarela-api\"\n}\n```\n\n**Request Fields Description**\n\n| key | data-type | required | description |\n|------------|--------------|-------------|-------------|\n| token  |  string | yes | valid access_token previously generated by horus |\n| optionValue  |  string | yes | rest endpoint or menu web registered in horus |\n| httpMethod  |  string | yes | http method related to the rest endpoint. Use **NOT_HTTP_METHOD** for web apps|\n| appName  |  string | yes | aplication identifier previously registered in horus|\n\n**Request Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-usil-request-id  |  4512451 | random alphanumeric value which identify this event |\n\n\n## Response\n\n```json\n{\n    \"code\": 20000,\n    \"message\": \"success\",\n    \"content\": {\n        \"isAllowed\": true,\n        \"subject\": \"sanvi@828fligth.com\"\n    }\n}\n```\n\n**Response Fields Description**\n\n\n| field | data-type | description |\n|------------|--------------|-------------|\n| code  | int | numeric value which indicates the success or failure of invocation. 200XYZ for success and any other value for failures  |\n| message  | string | message related to code. On errors contains a description  |\n| content.isAllowed  | boolean | flag that indicated if user related to the entered token has access to the aplication, endpoint and method  |\n| content.subject  | string | person email or clientId related to the entered token  |\n\n**Response Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-usil-request-id  |  ***** | value received in request headers or a  random alphanumeric value if client don't send it|\n\n**Response codes**\n\n- If response is success, http **status** will be **200** and **code** in body will be **200XYZ**\n- If the invocation ends with error, http status will have the standard status: 401, 403, 500, 502, etc and the code in body will contain an extra numeric values to classify the error:\n  - 400xyz\n  - 401xyz\n  - 403xyz\n  - 500xyz\n  - etcxyz\n\n\n| code | description |\n|------------|-------------|\n| 403100  | token expired |\n| 403101  | token malformed  |\n","name":"validate.md","meta":{"revision":0,"created":1646598529392,"version":0},"$loki":3},{"path":"/horus/person","id":3,"parent":0,"name":"person","type":"node","meta":{"revision":0,"created":1646598529392,"version":0},"$loki":4},{"path":"/horus/person/add-business-profile-to-user.md","id":4,"parent":3,"type":"child","text":"# Add business unit and profile to a person\n\nIf person will execute operations in an web or api, permissions are required. In horus these permissions are to have a business unit and profile. This endpoint allow you to add a busines unit and profile to an existent person.\n\n**Base Url** : `{{horusApiBaseUrl}}`\n\n**Endpoint** : `/v1/nonspec/oauth2/management/person/business-profile`\n\n**Method** : `POST`\n\n**Auth required** : Yes\n\n- clientId & clientSecret in body. This will change in next release\n\n**Permissions required** : Yes\n\n- Review internal horus documentation\n\n## Request\n\n**type: body**\n\n```json\n{\n    \"clientId\": \"bb145d5f\",\n    \"clientSecret\":\"bb145d5fxyz\",\n    \"email\":\"jane@828fligth.com\",\n    \"businessUnitId\":1,\n    \"profileId\":1\n}\n```\n\n**Request Fields Description**\n\n| key | data-type | required | description |\n|------------|--------------|-------------|-------------|\n| clientId  |  string | yes | clientId which allow the execution of this endpoint |\n| clientSecret  |  string | yes | clientSecret related to clientId |\n| email  |  string | yes | existing person email|\n| businessUnitId  |  int | yes | existing business unit id|\n| profileId  |  int | yes | existing profile id|\n\n**Request Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-usil-request-id  |  4512451 | random alphanumeric value which identify this event |\n\n\n## Response\n\n```json\n{\n    \"code\": 20000,\n    \"message\": \"success\"\n}\n```\n\n**Response Fields Description**\n\n\n| field | data-type | description |\n|------------|--------------|-------------|\n| code  | int | numeric value which indicates the success or failure of invocation. 200XYZ for success and any other value for failures  |\n| message  | string | message related to code. On errors contains a description  |\n\n**Response Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-usil-request-id  |  ***** | value received in request headers or a  random alphanumeric value if client don't send it|\n\n**Response codes**\n\n- If response is success, http **status** will be **200** and **code** in body will be **200XYZ**\n- If the invocation ends with error, http status will have the standard status: 401, 403, 500, 502, etc and the code in body will contain an extra numeric values to classify the error:\n  - 400xyz\n  - 401xyz\n  - 403xyz\n  - 500xyz\n  - etcxyz\n\n\n| code | description |\n|------------|-------------|\n| 200001  | entity was created  |\n| 200025  | relationship already exist  |\n| 400002  | field is required.  |\n| 403051  | clientId or clientScret are invalid.  |\n| 500020  | person was not found  |\n","name":"add-business-profile-to-user.md","meta":{"revision":0,"created":1646598529393,"version":0},"$loki":5},{"path":"/horus/person/create-person.md","id":5,"parent":3,"type":"child","text":"\n\n# Create Person\n\nUsed to create person\n\n**Base Url** : `{{horusApiBaseUrl}}`\n\n**Endpoint** : `/v1/nonspec/oauth2/management/person`\n\n**Method** : `POST`\n\n**Auth required** : Yes\n\n- clientId & clientSecret in body. This will change in next release\n\n**Permissions required** : Yes\n\n- Review internal horus documentation\n\n## Request\n\n**type: body**\n\n```json\n{\n  \"clientId\": \"bb145d5f\",\n  \"clientSecret\":\"bb145d5fxyz\",\n  \"mainIdentifier\": \"44512345\",\n  \"externaId\": \"92dd9aa0\",\n  \"firstName\": \"Jane\",\n  \"additionalFirstName\": \"Alice\",\n  \"lastName\": \"Doe\",\n  \"additionalLastName\": \"Patterson\",\n  \"email\": \"jane@828fligth.com\",\n  \"password\": \"\",\n  \"enabled\": 1,\n  \"custom\": \"{\\\"key\\\":\\\"value\\\"}\",\n  \"categoryId\": 1,\n  \"positionId\": 1\n}\n```\n\n**Request Fields Description**\n\n| key | data-type | required | description |\n|------------|--------------|-------------|-------------|\n| clientId  |  string | yes | clientId which allow the execution of this endpoint |\n| clientSecret  |  string | yes | clientSecret related to clientId |\n| mainIdentifier  |  string | yes | main identifier of person in the country. DNI for peruvians, SSN for american people, etc|\n| externalId  |  string | no | additional id of this person in another systems|\n| firstName  |  string | yes |person first name|\n| additionalFirstName  |  string | no |additional name of person. Usually in south america|\n| lastName  |  string | yes | person last name|\n| additionalLastName  | string | no |additional last name of person. Usually in south america|\n| email  | string | yes | person email to be used in login forms managed by horus|\n| password  | string | no | password related to email to be used in login forms managed by horus|\n| enabled  | int | no | flag to enable or disable this person. 1=enabled, 0=disabled|\n| custom  | string | no | string to add custom values of this person, that horus don't support|\n| categoryId  | int | yes | person category id in the company. Category must exist before this invocation|\n| positionId  | int | yes | person position id in the company. Position must exist before this invocation|\n\n\n**Request Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-usil-request-id  |  ***** | random alphanumeric value which identify this event |\n\n## Response\n\n```json\n{\n    \"code\": 20000,\n    \"message\": \"success\"\n}\n```\n\n**Response Fields Description**\n\n\n| field | data-type | description |\n|------------|--------------|-------------|\n| code  | int | numeric value which indicates the success or failure of invocation. 200XYZ for success and any other value for failures  |\n| message  | string | message related to code. On errors contains a description  |\n\n**Response Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-usil-request-id  |  ***** | value received in request headers or a  random alphanumeric value if client don't send it|\n\n**Response codes**\n\n- If response is success, http **status** will be **200** and **code** in body will be **200XYZ**\n- If the invocation ends with error, http status will have the standard status: 401, 403, 500, 502, etc and the code in body will contain an extra numeric values to classify the error:\n  - 400xyz\n  - 401xyz\n  - 403xyz\n  - 500xyz\n  - etcxyz\n\n\n| code | description |\n|------------|-------------|\n| 403051  | clientId or clientScret are invalid.  |\n| 400002  | field is required.  |\n| 200001  | entity was created  |\n| 200023  | a person already exist with provided email  |\n| 200024  | a person already exist with provided mainIdentifier  |\n","name":"create-person.md","order":1,"meta":{"revision":0,"created":1646598529393,"version":0},"$loki":6},{"path":"/horus/token","id":6,"parent":0,"name":"token","type":"node","meta":{"revision":0,"created":1646598529393,"version":0},"$loki":7},{"path":"/horus/token/silent-password.md","id":7,"parent":6,"type":"child","text":"# Silent token generation\n\nCreate tokens for users\n\n**Base Url** : `{{horusApiBaseUrl}}`\n\n**Endpoint** : `/v1/nonspec/oauth2/token/silent-password`\n\n**Method** : `POST`\n\n**Auth required** : Yes\n\n- clientId & clientSecret in body. This will change in next release\n\n**Permissions required** : Yes\n\n- Review internal horus documentation\n\n## Request\n\n**type: body**\n\n```json\n{\n    \"clientId\":\"bb145d5f\",\n    \"clientSecret\":\"bb145d5fxyz\",\n    \"grantType\":\"silent_password\",\n    \"username\":\"sanvi@828fligth.com\"\n}\n```\n\n**Request Fields Description**\n\n| key | data-type | required | description |\n|------------|--------------|-------------|-------------|\n| clientId  |  string | yes | clientId which allow the execution of this endpoint |\n| clientSecret  |  string | yes | clientSecret related to clientId |\n| grantType  |  string | yes | use **silent_password** |\n| username  |  string | yes | person email |\n\n**Request Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-usil-request-id  |  4512451 | random alphanumeric value which identify this event |\n\n\n## Response\n\n```json\n{\n    \"code\": 20000,\n    \"message\": \"success\",\n    \"content\": {\n        \"access_token\": \"eyJhbGciOiJIUzI1NiJ9.eqBo9Q\",\n        \"token_type\": \"bearer\",\n        \"expires_in\": \"3600s\"\n    }\n}\n```\n\n**Response Fields Description**\n\n\n| field | data-type | description |\n|------------|--------------|-------------|\n| code  | int | numeric value which indicates the success or failure of invocation. 200XYZ for success and any other value for failures  |\n| message  | string | message related to code. On errors contains a description  |\n| content.access_token  | string | token to be attached to any api invocation  |\n| content.token_type  | string | token type  |\n| content.expires_in  | string | token expiration in seconds  |\n\n**Response Headers Description**\n\n| header key | header value | description |\n|------------|--------------|-------------|\n| x-usil-request-id  |  ***** | value received in request headers or a  random alphanumeric value if client don't send it|\n\n**Response codes**\n\n- If response is success, http **status** will be **200** and **code** in body will be **200XYZ**\n- If the invocation ends with error, http status will have the standard status: 401, 403, 500, 502, etc and the code in body will contain an extra numeric values to classify the error:\n  - 400xyz\n  - 401xyz\n  - 403xyz\n  - 500xyz\n  - etcxyz\n\n\n| code | description |\n|------------|-------------|\n| 400002  | field is required.  |\n| 403051  | clientId or clientScret are invalid.  |\n| 500030  | person was not found  |\n","name":"silent-password.md","meta":{"revision":0,"created":1646598529394,"version":0},"$loki":8}],"idIndex":null,"binaryIndices":{},"constraints":null,"uniqueNames":[],"transforms":{},"objType":"documents","dirty":false,"cachedIndex":null,"cachedBinaryIndex":null,"cachedData":null,"adaptiveBinaryIndices":true,"transactional":false,"cloneObjects":false,"cloneMethod":"parse-stringify","asyncListeners":false,"disableMeta":false,"disableChangesApi":true,"disableDeltaChangesApi":true,"autoupdate":false,"serializableIndices":true,"disableFreeze":true,"ttl":null,"maxId":8,"DynamicViews":[],"events":{"insert":[],"update":[],"pre-insert":[],"pre-update":[],"close":[],"flushbuffer":[],"error":[],"delete":[null],"warning":[null]},"changes":[],"dirtyIds":[]}],"databaseVersion":1.5,"engineVersion":1.5,"autosave":false,"autosaveInterval":5000,"autosaveHandle":null,"throttledSaves":true,"options":{"serializationMethod":"normal","destructureDelimiter":"$<\n"},"persistenceMethod":"fs","persistenceAdapter":null,"verbose":false,"events":{"init":[null],"loaded":[],"flushChanges":[],"close":[],"changes":[],"warning":[]},"ENV":"NODEJS"}